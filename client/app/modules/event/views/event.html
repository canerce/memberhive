<div ng-controller="EventController as ctrl">
<mh-panel>
  <mh-panel-header><translate>Event</translate></mh-panel-header>
  <mh-panel-body>
    <form novalidate>
      <md-input-container >
        <label>Event Name</label>
        <input ng-model="ctrl.item.name">
      </md-input-container>
      <md-input-container >
        <label>Event Date</label>
        <input type="date" ng-model="ctrl.item.date">
      </md-input-container>
      <md-select ng-model="ctrl.templateId" ng-change="ctrl.updateTemplate()">
        <md-option ng-repeat="template in ctrl.templates"   ng-value="template.id">{{template.name}}</md-option>
      </md-select>
      
      <div class="event-template-item" ng-repeat="option in ctrl.template.data track by $index">
        <md-input-container>
          <label>{{option.name}}</label>
          <div ng-if="option.type == 'text'">
            <input type="text" ng-model="ctrl.item.data[$index]" />
          </div>
          <div ng-if="option.type == 'date'">
            <input type="date" ng-model="ctrl.item.data[$index]" />
          </div>
          <div ng-if="option.type == 'person'">
            <mh-person-chips ng-model="ctrl.item.data[$index]"></mh-person-chips>
          </div>
        </md-input-container>
      </div>
      
      <md-button class="md-raised md-primary" ng-click="ctrl.save()">
        <translate>Save</translate>
      </md-button>
    </form>
  </mh-panel-body>
</mh-panel>
</div>